tasks:
  - command: |
      find ./conf/lila.conf ./conf/lila-ws.conf -type f -exec sed -i "s/http:\/\/localhost:8080/$(gp url 8080 | sed 's/\//\\\//g')/g" {} \;
      find ./conf/lila.conf ./conf/lila-ws.conf -type f -exec sed -i "s/localhost:8080/$(gp url 8080 | cut -c9-)/g" {} \;
      ./lila-docker start
      ./lila-docker gitpod-welcome

ports:
  - port: 8080
    name: lichess
    description: Your Lichess development site
    onOpen: open-preview
  - port: 8025
    name: mailpit
    description: For debugging emails
    onOpen: ignore
  - port: 8081
    name: mongo-express
    description: "For exploring database schema and contents (u: admin / p: pass)"
    onOpen: ignore
  - port: 5601
    name: kibana
    description: For debugging Elasticsearch
    onOpen: ignore

vscode:
  extensions:
    - ms-azuretools.vscode-docker
    - scala-lang.scala
